# 家計簿アプリ 要件定義書
 
## 1. サービス概要
 
### 1.1 サービス名
 
Money Tracker
 
### 1.2 コンセプト
 
**「3つの機能だけ。続けられる家計簿」**
 
支出記録、カテゴリ分け、ダッシュボード表示。必要最小限の機能で、誰でも簡単に継続できる家計簿アプリ。
 
### 1.3 ターゲットユーザー
 
- 複雑な家計簿アプリで挫折した経験がある人
- とにかくシンプルに支出を記録したい人
- 20代〜40代の個人ユーザー
 
### 1.4 提供価値
 
- **シンプル**: 3つの機能だけで迷わない
- **継続性**: 最小限の入力で記録が続く
- **可視化**: 支出の傾向が一目でわかる
 
## 2. 機能要件
 
### 2.1 主要機能（3つのみ）
 
### 機能1: 支出記録
 
- 金額入力
- カテゴリ選択（固定9種類から選択）
- 記録ボタンを押すだけで完了
 
### 機能2: カテゴリ分け
 
固定カテゴリ（追加・変更不可）：
 
- 食費
- 日用品
- 交通費
- 娯楽
- 衣服・美容
- 医療・健康
- 住居費
- 通信費
- その他
 
### 機能3: ダッシュボード
 
**無料版**: 合計金額のみ表示
 
- 今週の支出合計
- 今月の支出合計
 
**プレミアム版**: カテゴリごとの支出グラフ（高度な分析機能）
 
- 日次・週次・月次の期間切り替え
- 期間セレクター（今日/昨日、今週/先週、今月/先月）
- カテゴリ別の詳細分析
  - 円グラフ：支出割合の可視化
  - 棒グラフ：カテゴリ別支出額の比較
  - トレンドライン：支出傾向の把握（日次のみ）
 
### 2.2 必須機能（主要機能を支える最小限の機能）
 
### ユーザー認証
 
- メールアドレスでのログイン（ソーシャルログインには未対応）
- パスワードリセット
- セッション管理
 
### データ管理
 
- 支出履歴の閲覧
- 支出データの編集
- 支出データの削除
 
## 3. 非機能要件
 
### 3.1 パフォーマンス
 
- 支出記録：1秒以内で完了
- シンプルで軽量な動作
 
### 3.2 ユーザビリティ
 
- スマートフォン最適化（レスポンシブデザイン）
- 最小ステップで支出記録完了（金額入力→カテゴリ選択→記録）
- 直感的で説明不要なUI
- 共通ヘッダーによるナビゲーション
 
### 3.3 セキュリティ
 
- ユーザーデータの安全な管理
- HTTPS通信
 
## 4. 期間分析機能の詳細仕様
 
### 4.1 期間切り替えUI
 
- **タブ切り替え**
  - 日次 / 週次 / 月次をタブで切り替え
  - アクティブタブはグラデーション背景
  - スムーズなトランジションアニメーション
 
### 4.2 期間セレクター
 
- **日次**
  - 今日 / 昨日
  - カレンダーピッカーで任意の日付選択可能
 
- **週次**
  - 今週 / 先週
  - 週の開始は月曜日
  - カスタム期間選択可能
 
- **月次**
  - 今月 / 先月
  - 年月ピッカーで任意の月選択可能
 
### 4.3 比較機能
 
- 選択した期間と前期間の比較
- 増減率の表示（％表示）
- 増減をカラーコーディング（増加:赤、減少:緑）
 
### 4.4 データ表示
 
- **サマリーカード**
  - 期間内の総支出
  - 前期間比較
  - 1日平均支出額
  - 最も支出が多いカテゴリ
 
- **詳細グラフ**
  - 日次：時系列折れ線グラフ
  - 週次：日別積み上げ棒グラフ
  - 月次：週別トレンドライン
 
## 5. 技術仕様
 
- **フロントエンド**: Next.js 15 (App Router)、TypeScript、Tailwind CSS（tailwind-merge は v2.2.0 を使用）、Shadcn UI
- **バックエンド**: Next.js API Routes
- **データベース**: Supabase（PostgreSQL）
  - ローカルは Supabase CLI にて検証（Dockerは未使用）
- **認証**: Clerk（Clerkダッシュボードからキーを取得する必要あり）
- **課金システム**: Clerk Billing（Stripe連携が必要、開発後半で実装）
- **グラフライブラリ**: Recharts（プレミアム機能で使用）
- **日時処理**: date-fns, date-fns-tz
- **ホスティング**: Vercel
- **その他**:
    - フォーム：react-hook-form
    - アイコン: lucide-react
    - Lint: ESLint, Prettier
- **テスト**: MVP目的のためテストは書かない
 
### 開発時の注意事項
- Clerk Billingは標準のnpmパッケージではなく、Clerkダッシュボードでの設定が必要
- Clerkダッシュボードでプランを作成する際は、スラグを「premium」に設定
- SupabaseとClerkの認証連携では、カスタムヘッダー方式でRLSを実装
- Supabaseローカル開発時はポート競合に注意（`supabase stop --all`で解決）
- Supabaseでユーザーテーブルを作る場合でも、ClerkのWebhook機能は使用しない
  - usersテーブルなどが必要であれば、初回データ登録時に作成する
- プレミアム機能はClerkのhas()関数でプラン確認を行う
 
## 6. 画面構成
 
### 6.1 公開ページ
 
- **トップページ** (`/`): サービス紹介、機能説明、料金プラン
- **料金ページ** (`/pricing`): Clerk BillingのPricingTableを表示
- **サインイン** (`/sign-in`): Clerkのサインインコンポーネント
- **サインアップ** (`/sign-up`): Clerkのサインアップコンポーネント
 
### 6.2 認証必須ページ
 
- **ダッシュボード** (`/dashboard`): メイン画面、支出記録と分析を表示
 
### 6.3 共通コンポーネント
 
- **ヘッダー**: ロゴ、ナビゲーション、ユーザーメニュー
- **フッター**: コピーライト表示（トップページのみ）
 
## 7 料金体系
 
### 7.1 無料プラン
 
- 支出記録（無制限）
- 週次・月次の合計金額表示
- 支出履歴閲覧
 
### 7.2 プレミアムプラン
 
- 月額: $10（ドル表記）
- **高度な分析機能**
  - 日次・週次・月次の期間切り替え
  - 過去データとの比較（昨日/先週/先月）
  - カテゴリ別の詳細グラフ（円グラフ・棒グラフ）
  - 支出トレンドの可視化
- **デザイン**
  - プレミアム感のあるUI
  - アニメーション効果
  - 高級感のあるグラデーション
- 無料プランの全機能含む